/*! Interactive Graphics Generator 2016-09-20 */
var bGraphics;!function(a){function b(a){console.log("answer event");var b=a.data,c=b.shape,d=b.coords,e=b.value,f=(b.id,b.quizRef);f.currentValue=e,console.log("moving selector over coord areas"+d);var g,h,i=d.split(",").map(function(a){return Number(a)});"circle"==c?(h=i[0]-i[2]+"px",g=i[1]-i[2]+"px"):"rect"==c&&(h=i[0]+"px",g=i[0]+"px"),f.highlighter.css({top:g,left:h,display:"block"}),f.currentQuestionAnswered=!0}function c(a){console.log("swap event");a.data.quizRef}function d(a){console.log("next event");var b=a.data.quizRef;return b.currentQuestionAnswered?(b.highlighter.css({display:"none"}),console.log("moving on..."),++b.currentQuestion,b.accumulatedValue+=Number(b.currentValue),b.currentValue=null,console.log(b.currentQuestion,b.questionsTotal),b.currentQuestion==b.questionsTotal?b.calculateTotal():b.imageContainer.attr("src",b.questions[b.currentQuestion]),b.currentQuestionAnswered=!1,void b.tracking.next()):void alert("You have not yet provided an answer to the current question.")}a.answer=b,a.swap=c,a.next=d}(bGraphics||(bGraphics={})),function(a){var b=function(){function a(){}return a}();a.arch=b}(bGraphics||(bGraphics={}));var bGraphics;!function(a){function b(b){console.log(b);var c=this.options=b,d=c.questions,e=c.answers,f=c.selector,g=c.questionMap,h=c.startMap,i=c.endMap,j=c.highlighter;if(this.questions=new a.preloader(d),this.answers=new a.preloader(e),this.highlighter=jQuery(j),this.questionsTotal=this.questions.length,this.imageContainer=jQuery(f),this.setInfo(f),this.track=new a.googleAnalyticsTracking({title:this.graphicInformation.title,category:"Interactive Graphic Quiz"}),h&&(this.startMap=new a.map(h),this.registerMap(this.startMap)),"Array"==typeof g)for(var k=0;k<g.length;k++){var l=g[k],m=new l(l);this.registerMap(m)}else this.imageMap=new a.map(g),this.registerMap(this.imageMap);i&&(this.endMap=new a.map(i),this.registerMap(i)),this.initializeQuiz()}function c(a){console.log("adding a new map"),this.mapElements.push(a),console.log(this.mapElements)}function d(){var a=this;this.imageMap.areas.forEach(function(b){b.data.quizRef=a;var c=function(){return b.data.action}();console.log(c),jQuery(b.element).click(b.data,a[b.data.action])})}function e(a){var b=jQuery(a);this.graphicInformation={name:b.attr("alt")||null,title:b.attr("title")||null,selector:a,originSrc:b.attr("src"),height:b.attr("height")||null,width:b.attr("width")||null,originMap:b.attr("usemap")},this.graphicInformation.title||console.warn("Your graphic does not have a title.  Analytics event tracking will be disabled")}function f(){console.log("quiz all done");var a=this.accumulatedValue/this.questionsTotal;console.log(a);var b=Math.floor(a)-1;this.resolveAnswer(b)}function g(a){this.answers[a]?this.imageContainer.attr("src",this.answers[a]):this.imageContainer.attr("src",this.answers[this.answers.length-1]),this.endMap&&this.imageContainer.attr("usemap","#"+this.mapElements.endmap),this.tracking.finished()}a.accumulatedValue=0,a.currentQuestion=0,a.currentQuestionAnswered=!1,a.currentValue=null,a.mapElements=[],a.init=b,a.registerMap=c,a.initializeQuiz=d,a.setInfo=e,a.calculateTotal=f,a.resolveAnswer=g}(bGraphics||(bGraphics={}));var bGraphics;!function(a){var b=function(){function a(a){console.log(a),console.log("new Area Map being generated"),this.mapElement=jQuery("map[name='"+a+"'"),this.questionAreas=this.buildArea(jQuery(this.mapElement).children("area[data-function='answer']").toArray()),this.swap=this.buildArea(jQuery(this.mapElement).children("area[data-function='swap']").toArray()),this.continueArea=this.buildArea(jQuery(this.mapElement).children("area[data-function='next']").toArray()),this.areas=this.buildArea(jQuery(this.mapElement).children("area").toArray())}return a.prototype.buildArea=function(a){var b=a.map(function(a){var b=jQuery(a);return{element:a,data:{shape:b.attr("shape"),coords:b.attr("coords"),value:b.attr("data-value"),action:b.attr("data-function")}}});return console.log(b),b},a}();a.map=b}(bGraphics||(bGraphics={})),function(a){var b=function(){function a(a){var b=this;return this.preloaded=[],this.ImageArray=a,a.forEach(function(a){b.loadImages(a)}),this.ImageArray}return a.prototype.loadImages=function(a){var b=new Image;b.src=a,this.preloaded.push(b)},a}();a.preloader=b}(bGraphics||(bGraphics={})),function(a){var b=function(){function a(a){this.category=a.category,this.label=a.title,this._analytics=window._gaq||null,this._ga=window.ga||null,console.log(this._analytics),console.log(this._ga)}return a.prototype.next=function(a){void 0===a&&(a=""),this._ga?this._ga("send","event",this.category,"next Question "+a,this.label):this._analytics&&this._analytics.push(["_trackEvent",this.category,"next Question "+a,this.label])},a.prototype.finished=function(){this._ga?this._ga("send","event",this.category,"Quiz completed",this.label):this._analytics&&this._analytics.push(["_trackEvent",this.category,"Quiz completed",this.label])},a.prototype.cta=function(){this._ga?this._ga("send","event",this.category,"Call to Action",this.label):this._analytics&&this._analytics.push(["_trackEvent",this.category,"Call to Action",this.label])},a.prototype.custom=function(a,b,c){void 0===b&&(b=this.category),void 0===c&&(c=this.label),a||console.warn("You have not provided an action for tracking"),this._ga?this._ga("send","event",b,a,c):this._analytics&&this._analytics.push(["_trackEvent",b,a,c])},a}();a.googleAnalyticsTracking=b}(bGraphics||(bGraphics={}));