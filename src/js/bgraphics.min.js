/*! Interactive Graphics Generator 2016-09-26 */
var bGraphics;!function(a){function b(a){console.log("starting quiz");a.data.quizRef}function c(a){console.log("answer event");var b=a.data,c=b.shape,d=b.coords,e=b.value,f=(b.id,b.quizRef);f.currentValue=e,console.log("moving selector over coord areas"+d);var g,h,i=d.split(",").map(function(a){return Number(a)});"circle"==c?(h=i[0]-i[2]+"px",g=i[1]-i[2]+"px"):"rect"==c&&(h=i[0]+"px",g=i[0]+"px"),f.highlighter.css({top:g,left:h,display:"block"}),f.currentQuestionAnswered=!0}function d(a){console.log("swap event");a.data.quizRef}function e(a){console.log("next event");var b=a.data.quizRef;return b.currentQuestionAnswered?(b.highlighter.css({display:"none"}),console.log("moving on..."),++b.currentQuestion,b.accumulatedValue+=Number(b.currentValue),b.answerKeeper.push(b.currentValue),b.currentValue=null,console.log(b.currentQuestion,b.questionsTotal),b.currentQuestion==b.questionsTotal?void b.calculateTotal():(b.imageContainer.attr("src",b.questions[b.currentQuestion]),b.currentQuestionAnswered=!1,void b.track.next())):void alert("You have not yet provided an answer to the current question.")}function f(a){console.log("Arch Popup");var b=a.data.quizRef;b.marpro.cta()}function g(a){var b=a.data.quizRef;console.log(a),b.track.custom("Url direct")}function h(a){var b=a.data.quizRef,c=b.options.remotePostUrl,d=b.answerKeeper,e=b.options.remoteCallback?b.options.remoteCallback:function(a){console.log(a)};jQuery.post(c,{answers:d},e)}a.begin=b,a.answer=c,a.swap=d,a.next=e,a.arch=f,a.learnMore=g,a.remotePost=h}(bGraphics||(bGraphics={}));var bGraphics;!function(a){var b=function(){function a(a){this.feedId=a.feedId,this.brand=a.brand,this.formId=a.formId,this.renderPumpkin()}return a.prototype.renderPumpkin=function(){var a='<a id="bGraphicArch" href="javascript:void(0)" data-br-form-id="'+this.formId+'" class="br-form-link" style="display:none;"></a>',b=jQuery(a);jQuery("body").append(b),jQuery("body").append("<script>\n\t(function(w,pk){var s=w.createElement('script');s.type='text/javascript';s.async=true;s.src='//pumpkin."+this.brand+".com/pumpkin.js';var f=w.getElementsByTagName('script')[0];f.parentNode.insertBefore(s,f);if(!pk.__S){window._pk=pk;pk.__S = 1.1;}pk.host='conversion."+this.brand+".com';pk.clientId='"+this.feedId+"';})(document,window._pk||[])\n</script>")},a.prototype.cta=function(){console.log("trigger arch");var a=jQuery("#bGraphicArch");a.trigger("click")},a}();a.archForm=b}(bGraphics||(bGraphics={}));var bGraphics;!function(a){function b(a){var b=this;try{jQuery(function(){return b.documentReady(a)})}catch(a){"jQuery is not defined"==a.message?console.warn(a.message+" and is required for bGraphics"):console.log(a.message)}}function c(b){console.log(b);var c=this.options=b,d=c.questions,e=c.answers,f=c.selector,g=c.questionMap,h=c.startMap,i=c.endMap,j=c.highlighter,k=c.arch;if(this.questions=new a.preloader(d),this.answers=new a.preloader(e),this.highlighter=jQuery(j),this.questionsTotal=this.questions.length,this.imageContainer=jQuery(f),this.setInfo(f),k&&(this.marpro=new a.archForm({brand:k.brand,formId:k.formId,feedId:k.id})),this.track=new a.googleAnalyticsTracking({title:this.graphicInformation.title,category:"Interactive Graphic Quiz"}),h&&(this.startMap=new a.map(h),this.registerMap(this.startMap,"start")),"Array"==typeof g)for(var l=0;l<g.length;l++){var m=g[l],n=new m(m);this.registerMap(n,"question")}else this.imageMap=new a.map(g),this.registerMap(this.imageMap,"question");i&&(this.endMap=new a.map(i),this.registerMap(this.endMap,"end")),this.initializeQuiz(),console.log(this)}function d(a,b){console.log("registering a "+b+" map",a),this.mapElements[b]||(this.mapElements[b]=[]),this.mapElements[b].push(a),console.log(this.mapElements)}function e(){var a=this;this.imageMap.areas.forEach(function(b){b.data.quizRef=a;var c=function(){return b.data.action}();console.log(c),jQuery(b.element).click(b.data,a[b.data.action])})}function f(a){var b=jQuery(a);this.graphicInformation={name:b.attr("alt")||null,title:b.attr("title")||null,selector:a,originSrc:b.attr("src"),height:b.attr("height")||null,width:b.attr("width")||null,originMap:b.attr("usemap")},this.graphicInformation.title||console.warn("Your graphic does not have a title.  Analytics event tracking will be disabled")}function g(){console.log("quiz all done");var a=this.accumulatedValue/this.questionsTotal;console.log(a);var b=Math.floor(a)-1;this.resolveAnswer(b)}function h(a){this.answers[a]?this.imageContainer.attr("src",this.answers[a]):this.imageContainer.attr("src",this.answers[this.answers.length-1]),this.endMap&&this.imageContainer.attr("usemap","#"+this.mapElements.end[0].name),this.track.finished()}a.accumulatedValue=0,a.currentQuestion=0,a.currentQuestionAnswered=!1,a.currentValue=null,a.mapElements=[],a.answerKeeper=[],a.init=b,a.documentReady=c,a.registerMap=d,a.initializeQuiz=e,a.setInfo=f,a.calculateTotal=g,a.resolveAnswer=h}(bGraphics||(bGraphics={}));var bGraphics;!function(a){var b=function(){function a(a){this.name=a,this.mapElement=jQuery("map[name='"+a+"'");var b=this.mapElement.attr("data-questions");b&&(this.forQuestions=b.split(",").map(function(a){return Number(a)})),this.areas=this.buildArea(jQuery(this.mapElement).children("area").toArray())}return a.prototype.buildArea=function(a){var b=a.map(function(a){var b=jQuery(a);return{element:a,data:{shape:b.attr("shape"),coords:b.attr("coords"),value:b.attr("data-value"),action:b.attr("data-function")}}});return b},a}();a.map=b}(bGraphics||(bGraphics={})),function(a){var b=function(){function a(a){var b=this;return this.preloaded=[],this.ImageArray=a,a.forEach(function(a){b.loadImages(a)}),this.ImageArray}return a.prototype.loadImages=function(a){var b=new Image;b.src=a,this.preloaded.push(b)},a}();a.preloader=b}(bGraphics||(bGraphics={})),function(a){var b=function(){function a(a){this.category=a.category,this.label=a.title,this._analytics=window._gaq||null,this._ga=window.ga||null}return a.prototype.next=function(a){void 0===a&&(a=""),console.log("tracking next"),this._ga?this._ga("send","event",this.category,"next Question "+a,this.label):this._analytics&&this._analytics.push(["_trackEvent",this.category,"next Question "+a,this.label])},a.prototype.finished=function(){console.log("tracking finished"),this._ga?this._ga("send","event",this.category,"Quiz completed",this.label):this._analytics&&this._analytics.push(["_trackEvent",this.category,"Quiz completed",this.label])},a.prototype.cta=function(){console.log("tracking cta click"),this._ga?this._ga("send","event",this.category,"Call to Action",this.label):this._analytics&&this._analytics.push(["_trackEvent",this.category,"Call to Action",this.label])},a.prototype.custom=function(a,b,c){void 0===b&&(b=this.category),void 0===c&&(c=this.label),console.log("track custom event"),a||console.warn("You have not provided an action for tracking"),this._ga?this._ga("send","event",b,a,c):this._analytics&&this._analytics.push(["_trackEvent",b,a,c])},a}();a.googleAnalyticsTracking=b}(bGraphics||(bGraphics={}));