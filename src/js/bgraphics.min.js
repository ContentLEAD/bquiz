/*! bgraphics-library 2016-10-04 */
var bGraphics;!function(a){var b=function(){function a(){}return a.prototype.begin=function(a){console.log("starting quiz");var b=a.data.quizRef;b.imageContainer.attr("usemap","#"+b.mapElements.question[0].name),b.imageContainer.attr("src",b.questions[0])},a.prototype.answer=function(a){console.log("answer event");var b=a.data,c=b.shape,d=b.coords,e=b.value,f=(b.id,b.quizRef);f.currentValue=e,console.log("moving selector over coord areas"+d);var g,h,i=d.split(",").map(function(a){return Number(a)});"circle"==c?(h=i[0]-i[2]+"px",g=i[1]-i[2]+"px"):"rect"==c&&(h=i[0]+"px",g=i[0]+"px"),f.highlighter.css({top:g,left:h,display:"block"}),f.currentQuestionAnswered=!0},a.prototype.swap=function(a){console.log("swap event");a.data.quizRef},a.prototype.next=function(a){console.log("next event");var b=a.data.quizRef;return b.currentQuestionAnswered?(b.highlighter.css({display:"none"}),console.log("moving on..."),++b.currentQuestion,b.accumulatedValue+=Number(b.currentValue),b.answerKeeper.push(b.currentValue),b.currentValue=null,console.log(b.currentQuestion,b.questionsTotal),b.currentQuestion==b.questionsTotal?void b.calculateTotal():(b.questionMaps.length>0&&b.imageContainer.attr("usemap","#"+b.questionMaps[b.currentQuestion+1]),b.imageContainer.attr("src",b.questions[b.currentQuestion]),b.currentQuestionAnswered=!1,void b.track.next())):void alert("You have not yet provided an answer to the current question.")},a.prototype.arch=function(a){console.log("Arch Popup");var b=a.data.quizRef;b.marpro.cta()},a.prototype.learnMore=function(a){var b=a.data.quizRef;console.log(a),b.track.custom("Url direct")},a.prototype.remotePost=function(a){var b=a.data.quizRef,c=b.options.remotePostUrl,d=b.answerKeeper,e=b.options.remoteCallback?b.options.remoteCallback:function(a){console.log(a)};jQuery.post(c,{answers:d},e)},a.prototype.share=function(a){var b=a.data,c=b.quizRef,d=b.share;console.log(c),console.log(d),c.sharer.share({network:d})},a}();a.acts=b}(bGraphics||(bGraphics={}));var bGraphics;!function(a){var b=function(){function a(a){this.feedId=a.feedId,this.brand=a.brand,this.formId=a.formId,this.renderPumpkin()}return a.prototype.renderPumpkin=function(){var a='<a id="bGraphicArch" href="javascript:void(0)" data-br-form-id="'+this.formId+'" class="br-form-link" style="display:none;"></a>',b=jQuery(a);jQuery("body").append(b),jQuery("body").append("<script>\n\t(function(w,pk){var s=w.createElement('script');s.type='text/javascript';s.async=true;s.src='//pumpkin."+this.brand+".com/pumpkin.js';var f=w.getElementsByTagName('script')[0];f.parentNode.insertBefore(s,f);if(!pk.__S){window._pk=pk;pk.__S = 1.1;}pk.host='conversion."+this.brand+".com';pk.clientId='"+this.feedId+"';})(document,window._pk||[])\n</script>")},a.prototype.cta=function(){console.log("trigger arch");var a=jQuery("#bGraphicArch");a.trigger("click")},a}();a.archForm=b}(bGraphics||(bGraphics={}));var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},bGraphics;!function(a){var b=function(b){function c(){b.call(this),this.accumulatedValue=0,this.currentQuestion=0,this.currentQuestionAnswered=!1,this.currentValue=null,this.mapElements=[],this.answerKeeper=[],this.questionMaps=[]}return __extends(c,b),c.prototype.init=function(a){var b=this;try{jQuery(function(){return b.documentReady(a)})}catch(a){"jQuery is not defined"==a.message?console.warn(a.message+" and is required for bGraphics"):console.log(a.message)}},c.prototype.documentReady=function(b){console.log(b);var c=this.options=b,d=c.questions,e=c.answers,f=c.selector,g=c.questionMap,h=c.startMap,i=c.endMap,j=c.highlighter,k=c.arch,l=c.resultUrls;if(this.resultUrls=l,this.questions=new a.preloader(d),this.answers=new a.preloader(e),this.highlighter=jQuery(j),this.questionsTotal=this.questions.length,this.imageContainer=jQuery(f),this.setInfo(f),this.sharer=new a.sharing,k&&(this.marpro=new a.archForm({brand:k.brand,formId:k.formId,feedId:k.id})),this.track=new a.googleAnalyticsTracking({title:this.graphicInformation.title,category:"Interactive Graphic Quiz"}),h&&(this.startMap=new a.map(h),this.registerMap(this.startMap,"start")),g instanceof Array)for(var m=0;m<g.length;m++){var n=g[m],o=new a.map(n);this.registerMap(o,"question")}else this.imageMap=new a.map(g),this.registerMap(this.imageMap,"question");i&&(this.endMap=new a.map(i),this.registerMap(this.endMap,"end")),console.log(this)},c.prototype.registerMap=function(a,b){var c=this;console.log("registering a "+b+" map"),this.mapElements[b]||(this.mapElements[b]=[]),this.mapElements[b].push(a),a.forQuestions&&a.forQuestions.forEach(function(b){c.questionMaps[b]=a.name}),this.initializeQuiz(a)},c.prototype.initializeQuiz=function(a){var b=this;console.log(a),a.areas.forEach(function(a){a.data.quizRef=b;(function(){return a.data.action})();console.log(a.data.action),jQuery(a.element).click(a.data,b[a.data.action])})},c.prototype.setInfo=function(a){var b=jQuery(a);this.graphicInformation={name:b.attr("alt")||null,title:b.attr("title")||null,selector:a,originSrc:b.attr("src"),height:b.attr("height")||null,width:b.attr("width")||null,originMap:b.attr("usemap")},this.graphicInformation.title||console.warn("Your graphic does not have a title.  Analytics event tracking will be disabled")},c.prototype.calculateTotal=function(){console.log("quiz all done");var a=this.accumulatedValue/this.questionsTotal;console.log(a);var b=Math.floor(a)-1;this.resolveAnswer(b)},c.prototype.resolveAnswer=function(a){this.answers[a]?this.imageContainer.attr("src",this.answers[a]):this.imageContainer.attr("src",this.answers[this.answers.length-1]),this.endMap&&this.imageContainer.attr("usemap","#"+this.mapElements.end[0].name),this.resultUrls.length>0&&this.sharer.setUrl(this.resultUrls[a]),this.track.finished()},c}(a.acts);a.bQuiz=new b}(bGraphics||(bGraphics={}));var bGraphics;!function(a){var b=function(){function a(a){this.name=a,this.mapElement=jQuery("map[name='"+a+"'");var b=this.mapElement.attr("data-questions");b&&(this.forQuestions=b.split(",").map(function(a){return Number(a)})),this.areas=this.buildArea(jQuery(this.mapElement).children("area").toArray())}return a.prototype.buildArea=function(a){var b=a.map(function(a){var b=jQuery(a),c={element:a,data:{shape:b.attr("shape"),coords:b.attr("coords")}},d=b.data();for(var e in d)c.data[e]=d[e];return c});return b},a}();a.map=b}(bGraphics||(bGraphics={})),function(a){var b=function(){function a(a){var b=this;return this.preloaded=[],this.ImageArray=a,a.forEach(function(a){b.loadImages(a)}),this.ImageArray}return a.prototype.loadImages=function(a){var b=new Image;b.src=a,this.preloaded.push(b)},a}();a.preloader=b}(bGraphics||(bGraphics={})),function(a){var b=function(){function a(){this.currentUrl=window.location.href}return a.prototype.freshWindow=function(a){window.open(a,"targetWindow","toolbar=no,location=no,status=no,menubar=no,scrollbars=no,resizable=no,width=500,height=500")},a.prototype.share=function(a){var b=a.network,c=this[b]({img:a.img||"",title:a.title||""});this.freshWindow(c)},a.prototype.setUrl=function(a){this.currentUrl=a},a.prototype.facebook=function(a){return"http://www.facebook.com/sharer/sharer.php?u="+this.currentUrl},a.prototype.twitter=function(a){return"https://twitter.com/intent/tweet?original_referer="+this.currentUrl+"&url="+this.currentUrl},a.prototype.linkedin=function(a){return"https://www.linkedin.com/cws/share?url="+this.currentUrl},a.prototype.googleplus=function(a){return"https://plus.google.com/share?url="+this.currentUrl},a.prototype.pinterest=function(a){a.img?a.img:"",a.title?a.title:"";return"https://pinterest.com/pin/create/bookmarklet/?media=[post-img]&url=[post-url]&description=[post-title]"},a.prototype.reddit=function(a){return"http://reddit.com/submit?url=[post-url]&title=[post-title]"},a.prototype.mail=function(a){},a}();a.sharing=b}(bGraphics||(bGraphics={})),function(a){var b=function(){function a(a){this.category=a.category,this.label=a.title,this._analytics=window._gaq||null,this._ga=window.ga||null}return a.prototype.next=function(a){void 0===a&&(a=""),console.log("tracking next"),this._ga?this._ga("send","event",this.category,"next Question "+a,this.label):this._analytics&&this._analytics.push(["_trackEvent",this.category,"next Question "+a,this.label])},a.prototype.finished=function(){console.log("tracking finished"),this._ga?this._ga("send","event",this.category,"Quiz completed",this.label):this._analytics&&this._analytics.push(["_trackEvent",this.category,"Quiz completed",this.label])},a.prototype.cta=function(){console.log("tracking cta click"),this._ga?this._ga("send","event",this.category,"Call to Action",this.label):this._analytics&&this._analytics.push(["_trackEvent",this.category,"Call to Action",this.label])},a.prototype.custom=function(a,b,c){void 0===b&&(b=this.category),void 0===c&&(c=this.label),console.log("track custom event"),a||console.warn("You have not provided an action for tracking"),this._ga?this._ga("send","event",b,a,c):this._analytics&&this._analytics.push(["_trackEvent",b,a,c])},a}();a.googleAnalyticsTracking=b}(bGraphics||(bGraphics={}));