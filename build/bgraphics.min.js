/*! Interactive Graphics Generator 2016-09-16 */
var areamap=function(){function a(a){var b=jQuery(a);b.attr("shape")}return a}(),bGraphics=function(){function a(a){this.accumulatedValue=0,this.currentQuestion=0,this.currentQuestionAnswered=!1,this.currentValue=null,this.mapElements=[],console.log(a);var b=this.options=a,c=b.questions,d=b.answers,e=b.selector,f=b.questionMap,g=b.startMap,h=b.endMap,i=b.highlighter;this.questions=new preloader(c),this.answers=new preloader(d),this.highlighter=jQuery(i),this.questionsTotal=this.questions.length,this.imageContainer=jQuery(e),g&&(this.startMap=new map(g),this.registerMap(this.startMap)),"Array"==typeof f||(this.imageMap=new map(f),this.registerMap(this.imageMap)),h&&(this.endMap=new map(h),this.registerMap(h)),this.initializeQuiz()}return a.prototype.registerMap=function(a){console.log("this is the map"),this.mapElements.endmap=a},a.prototype.initializeQuiz=function(){var a=this;console.log(this.imageMap.questionAreas),this.imageMap.questionAreas.forEach(function(b){console.log(b),b.data.quizRef=a,jQuery(b.element).click(b.data,a.registerAnswer)}),this.imageMap.continueArea.forEach(function(b){jQuery(b.element).click({quizRef:a},a.next)}),this.imageMap.swap.forEach(function(b){b.data.quizRef=a,jQuery(b.element).click(b.data,a.swap)})},a.prototype.registerAnswer=function(a){var b=a.data,c=b.shape,d=b.coords,e=b.value,f=(b.id,b.quizRef);if(console.log("value is "+e),console.log(f),f.currentValue=e,console.log("moving selector over coord areas"+d),"circle"==c){var g=d.split(",").map(function(a){return Number(a)}),h=g[0]-g[2]+"px",i=g[1]-g[2]+"px";f.highlighter.css({top:i,left:h,display:"block"})}f.currentQuestionAnswered=!0},a.prototype.swap=function(a){a.data.quizRef},a.prototype.next=function(a){var b=a.data.quizRef;return b.currentQuestionAnswered?(b.highlighter.css({display:"none"}),console.log("moving on..."),++b.currentQuestion,b.accumulatedValue+=Number(b.currentValue),b.currentValue=null,console.log(b.currentQuestion,b.questionsTotal),b.currentQuestion==b.questionsTotal?b.calculateTotal():b.imageContainer.attr("src",b.questions[b.currentQuestion]),void(b.currentQuestionAnswered=!1)):void alert("You have not yet provided an answer to the current question.")},a.prototype.calculateTotal=function(){console.log("quiz all done");var a=this.accumulatedValue/this.questionsTotal;console.log(a);var b=Math.floor(a)-1;this.resolveAnswer(b)},a.prototype.resolveAnswer=function(a){this.answers[a]?this.imageContainer.attr("src",this.answers[a]):this.imageContainer.attr("src",this.answers[this.answers.length-1]),this.endMap&&this.imageContainer.attr("usemap","#"+this.mapElements.endmap)},a}(),map=function(){function a(a){console.log(a),console.log("new Area Map being generated"),this.mapElement=jQuery("map[name='"+a+"'"),this.questionAreas=this.buildArea(jQuery(this.mapElement).children("area[data-function='answer']").toArray()),this.swap=this.buildArea(jQuery(this.mapElement).children("area[data-function='swap']").toArray()),this.continueArea=this.buildArea(jQuery(this.mapElement).children("area[data-function='next']").toArray())}return a.prototype.buildArea=function(a){var b=a.map(function(a){var b=jQuery(a);return{element:a,data:{shape:b.attr("shape"),coords:b.attr("coords"),value:b.attr("data-value"),action:b.attr("data-function")}}});return b},a}(),preloader=function(){function a(a){var b=this;return this.preloaded=[],this.ImageArray=a,a.forEach(function(a){b.loadImages(a)}),this.ImageArray}return a.prototype.loadImages=function(a){var b=new Image;b.src=a,this.preloaded.push(b)},a}();